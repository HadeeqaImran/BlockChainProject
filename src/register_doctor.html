<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Registration</title>
</head>
<body>
    <h1>Doctor Registration</h1>
    <form id="doctorForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="specialty">Specialty:</label>
        <input type="text" id="specialty" name="specialty" required><br><br>
        <button type="submit">Register</button>
    </form>
    <a href="list_doctors.html">Display</a>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
    <script>
        $(document).ready(function() {
    $('#doctorForm').submit(async function(event) {
        event.preventDefault(); // Prevent default form submission behavior
        // Retrieve form data
        var _name = $("#name").val();
        var _specialty = $("#specialty").val();
        try {
            // Call the registerDoctor function from your DApps app.js
            await App.registerDoctor(_name, _specialty);

            // Handle success response
            console.log("Doctor registered and stored in the blockchain and database successfully!");
            alert("Doctor registered and stored in the blockchain and database successfully!");
        } catch (error) {
            // Handle error response
            console.error("Failed to register doctor:", error);
            alert("Failed to register doctor" + error);
        }
    });
});
    </script>
</body>
</html>
